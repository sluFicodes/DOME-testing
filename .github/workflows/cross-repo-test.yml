name: Cross-Repo System Test

on:
  repository_dispatch:
    types:
      - cross-repo-test

jobs:
  run-system-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Testing Repository
        uses: actions/checkout@v3

      - name: System testing (build + execution)
        env:
          GIT_TOKEN: ${{ secrets.PAT_TEST }}
        run: |
          ls
          chmod +x testing.sh
          ./testing.sh ${{ github.event.client_payload.branch_A }} ${{ github.event.client_payload.repository_A }} ${{ github.event.client_payload.branch_B }} ${{ github.event.client_payload.repository_B }} ${{ github.event.client_payload.tm_version }}

